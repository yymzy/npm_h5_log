{"version":3,"file":"index.js","sources":["../node_modules/tslib/tslib.es6.js","../src/utils/collect.ts","../src/utils/index.ts","../src/index.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","export type MsgType = (string[] | string)[]\nclass CollectError {\n    constructor() { }\n    maps: MsgType = [];\n    title: string = '';\n    collect(msg: string[], title?: string) {\n        this.maps.push(msg);\n        if (!this.title) {\n            this.title = title;\n        }\n    }\n    get() {\n        return [this.title, ...this.maps];\n    }\n    clear() {\n        this.title = '';\n        this.maps = [];\n    }\n}\n\nexport default CollectError;","import Robot from \"dingtalk-robot-sender\";\nimport CollectError, { MsgType } from \"./collect\";\n\n/*\n *  默认上报的错误信息\n */\nconst defaults = {\n  ua: window.navigator.userAgent,\n  browser: getBrowser(),\n  os: getDevices(),\n  osVersion: getSystemVersion(),\n  errUrl: window.location.href,\n  msg: \"\", // 错误的具体信息\n  url: \"\", // 错误所在的url\n  line: \"\", // 错误所在的行\n  col: \"\", // 错误所在的列\n  error: \"\", // 具体的error对象\n};\n\ntype DefaultTypeKeys = typeof defaults;\nexport type DefaultTypeMap = { [K in keyof DefaultTypeKeys]: string };\n\nexport interface RunParamsType {\n  name?: string;\n  delay?: number;\n  success?: () => void;\n  fail?: () => void;\n  ajax?: { url: string; data: Record<string, any> };\n  dd?: {\n    accessToken: string;\n    secret: string;\n  };\n}\n\nexport type RunParamsFun = (d: DefaultTypeMap) => void;\n\n/**\n *\n * @description 获取系统版本\n * @returns\n */\nfunction getSystemVersion() {\n  const ua = window.navigator.userAgent;\n  if (ua.indexOf(\"CPU iPhone OS \") >= 0) {\n    return ua.substring(\n      ua.indexOf(\"CPU iPhone OS \") + 14,\n      ua.indexOf(\" like Mac OS X\")\n    );\n  }\n  if (ua.indexOf(\"Android \") >= 0) {\n    return ua.substr(ua.indexOf(\"Android \") + 8, 3);\n  }\n  return \"\";\n}\n\n/**\n   获取浏览器类型\n  */\nfunction getBrowser() {\n  const userAgent = window.navigator.userAgent; // 取得浏览器的userAgent字符串\n  const isOpera = userAgent.indexOf(\"Opera\") > -1;\n  if (isOpera) {\n    return \"Opera\";\n  } // 判断是否Opera浏览器\n  if (userAgent.indexOf(\"Firefox\") > -1) {\n    return \"FF\";\n  } // 判断是否Firefox浏览器\n  if (userAgent.indexOf(\"Chrome\") > -1) {\n    return \"Chrome\";\n  }\n  if (userAgent.indexOf(\"Safari\") > -1) {\n    return \"Safari\";\n  } // 判断是否Safari浏览器\n  if (\n    userAgent.indexOf(\"compatible\") > -1 &&\n    userAgent.indexOf(\"MSIE\") > -1 &&\n    !isOpera\n  ) {\n    return \"IE\";\n  } // 判断是否IE浏览器\n}\n\n/**\n   获取设备是安卓、IOS  还是PC端\n  */\nfunction getDevices() {\n  const u = window.navigator.userAgent;\n  if (\n    /AppleWebKit.*Mobile/i.test(window.navigator.userAgent) ||\n    /MIDP|SymbianOS|NOKIA|SAMSUNG|LG|NEC|TCL|Alcatel|BIRD|DBTEL|Dopod|PHILIPS|HAIER|LENOVO|MOT-|Nokia|SonyEricsson|SIE-|Amoi|ZTE/.test(\n      window.navigator.userAgent\n    )\n  ) {\n    if (window.location.href.indexOf(\"?mobile\") < 0) {\n      try {\n        if (/iPhone|mac|iPod|iPad/i.test(window.navigator.userAgent)) {\n          return \"iPhone\";\n        } else {\n          return \"Android\";\n        }\n      } catch (e) { }\n    }\n  }\n  if (u.indexOf(\"iPad\") > -1) {\n    return \"iPhone\";\n  }\n  return \"Android\";\n}\n\nfunction Markdown() {\n  this.text = '';\n  this.title = '';\n  this.items = [];\n  this.setTitle = function (title) {\n    this.title = title;\n    return this;\n  }\n  this.add = function (text) {\n    if (Array.isArray(text)) {\n      this.items.concat(text);\n    } else {\n      this.items.push(text);\n    }\n    this.text = this.items.join('\\n');\n    return this;\n  }\n}\n\nfunction ddNotice(params: RunParamsType, msgs: MsgType) {\n  return new Promise((resolve, reject) => {\n    // 钉钉机器人群通知\n    const ddIns = new Robot({\n      baseUrl: \"https://oapi.dingtalk.com/robot/send\",\n      ...params.dd,\n    });\n\n    const markdownTitle = params.name || 'Error';\n    const content = new Markdown()\n      .setTitle(markdownTitle)\n      .add(`[${markdownTitle}]\\n`);\n\n    // 第一条是title\n    msgs.forEach((item, index) => {\n      if (index > 0) {\n        content.add(`--------------ERROR${`${index}`.padStart(3, '0')}--------------\\n`)\n      }\n      if (Array.isArray(item)) {\n        item.forEach(iitem => {\n          content.add(`${iitem}\\n`);\n        });\n      } else {\n        content.add(`${item}\\n`);\n      }\n    });\n    ddIns.markdown(content.title, content.text)\n      .then(resolve)\n      .catch(reject);\n  });\n}\n/**\n *\n * @description 触发上报\n * @param msgs\n * @param params\n */\nfunction report(msgs: MsgType, params: RunParamsType) {\n  if (params.dd) {\n    return ddNotice(params, msgs)\n      .then(params.success)\n      .catch(params.fail);\n  }\n  return Promise.resolve();\n}\n\n\n\n/**\n * 核心代码区\n **/\nconst run = function (params: RunParamsType, callback?: RunParamsFun) {\n  const errIns = new CollectError();\n  let timer: NodeJS.Timeout;\n  window.onerror = function (msg, url, line, col, error) {\n    // 采用异步的方式,避免阻塞\n    setTimeout(function () {\n      // 不一定所有浏览器都支持col参数，如果不支持就用window.event来兼容\n      col = col || (window.event && (window.event as any).errorCharacter) || 0;\n\n      defaults.url = url;\n      defaults.line = `${line}`;\n      defaults.col = `${col}`;\n\n      if (error && error.stack) {\n        // 如果浏览器有堆栈信息，直接使用\n        defaults.msg = error.stack.toString();\n      } else if (arguments.callee) {\n        // 尝试通过callee拿堆栈信息\n        const ext = [];\n        let fn = arguments.callee.caller;\n        let floor = 3; // 这里只拿三层堆栈信息\n        while (fn && --floor > 0) {\n          ext.push(fn.toString());\n          if (fn === fn.caller) {\n            break; // 如果有环\n          }\n          fn = fn.caller;\n        }\n        defaults.msg = ext.join(\",\");\n      }\n      // 合并上报的数据，包括默认上报的数据和自定义上报的数据\n      const reportData = {\n        ...params.ajax?.data,\n        ...defaults,\n      };\n      if (typeof callback === \"function\") {\n        callback(reportData);\n      }\n\n      // 收集错误\n      errIns.collect([\n        `position：${defaults.url}:${defaults.line}:${defaults.col}`,\n        `message：${defaults.msg}`\n      ], defaults.ua);\n      clearTimeout(timer);\n      // 延迟上报\n      timer = setTimeout(() => {\n        report(errIns.get(), params).then(() => {\n          errIns.clear();\n        });\n      }, (params.delay || 1) * 1000);\n    }, 0);\n\n    return true; // 错误不会console浏览器上,如需要，可将这样注释\n  };\n};\n\nexport default run;\n","import run, { RunParamsFun, RunParamsType } from \"./utils\";\n\nexport function h5Log(params: RunParamsType, callback?: RunParamsFun) {\n  return run(params, callback);\n}\n"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","__spreadArrays","il","r","Array","k","a","j","jl","CollectError","msg","title","maps","push","defaults","ua","window","navigator","userAgent","browser","getBrowser","os","getDevices","osVersion","getSystemVersion","errUrl","location","href","url","line","col","error","indexOf","substring","substr","isOpera","u","test","e","Markdown","text","items","setTitle","add","isArray","concat","join","ddNotice","params","msgs","Promise","resolve","reject","ddIns","Robot","baseUrl","dd","markdownTitle","name","content","forEach","item","index","padStart","iitem","markdown","then","catch","report","success","fail","run","callback","timer","errIns","onerror","setTimeout","event","errorCharacter","stack","toString","callee","ext","fn","caller","floor","reportData","ajax","data","collect","clearTimeout","get","clear","delay","h5Log"],"mappings":"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"}